{"version":3,"sources":["config.js","ListPage.js","ControlMapperRow.js","ControlsModal.js","FrameTimer.js","KeyboardController.js","Screen.js","utils.js","Speakers.js","RunPage.js","App.js","index.js"],"names":["config","ROMS","Mario ♥","Bubble Bobble","Castlevania","Contra","Donkey Kong Classics","Duck Hunt","Final Fantasy","Golf","Kirby's Adventure","The Legend of Zelda","Lemmings","Lifeforce","Mario Bros.","Mega Man","Metal Gear","Metroid","Pac-Man","Super Mario Bros.","Super Mario Bros. 2","Super Mario Bros. 3","Tecmo Super Bowl","Teenage Mutant Ninja Turtles II","Tennis","Tetris","Tetris 2","Zelda 2","GOOGLE_ANALYTICS_CODE","process","REACT_APP_GOOGLE_ANALYTICS_CODE","SENTRY_URI","REACT_APP_SENTRY_URI","ListPage","handleDragOver","e","preventDefault","dataTransfer","dropEffect","handleDrop","file","items","getAsFile","files","_this","props","history","push","pathname","state","react_default","a","createElement","className","onDragOver","this","onDrop","href","reactstrap_es","Object","keys","map","key","Link","to","encodeURIComponent","Component","ControlMapperRow","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","playerOneButton","playerTwoButton","waitingForKey","handleClick","bind","assertThisInitialized","button","playerButtons","console","log","setState","prevProps","prevState","player","_this2","buttonName","onClick","ControlsModal","undefined","modified","handleKeyDown","listenForKey","setKeys","removeKeyListener","document","addEventListener","event","newKeys","objectSpread","defineProperty","keyCode","toConsumableArray","slice","concat","length","String","toUpperCase","removeEventListener","isOpen","toggle","src_ControlMapperRow","Controller","BUTTON_LEFT","BUTTON_RIGHT","BUTTON_UP","BUTTON_DOWN","BUTTON_A","BUTTON_B","BUTTON_START","BUTTON_SELECT","outline","color","FrameTimer","onAnimationFrame","calibrating","calibrationStartTime","Date","getTime","calibrationCurrentFrames","calibrationFrames","fps","desiredFPS","calibrationTolerance","startBodgeMode","requestAnimationFrame","running","bodgeMode","onGenerateFrame","onWriteFrame","bodgeInterval","setInterval","onBodge","calibrationDelay","_requestID","window","cancelAnimationFrame","clearInterval","KEYS","88","89","90","17","13","38","40","37","39","103","105","99","97","104","98","100","102","KeyboardController","options","loadKeys","localStorage","getItem","JSON","parse","setItem","stringify","onButtonDown","handleKeyUp","onButtonUp","handleKeyPress","SCREEN_WIDTH","SCREEN_HEIGHT","Screen","setBuffer","buffer","i","y","x","buf32","writeBuffer","imageData","data","set","buf8","context","putImageData","fitInParent","parent","canvas","parentNode","parentWidth","clientWidth","parentHeight","clientHeight","desiredRatio","style","width","Math","round","height","handleMouseDown","onMouseDown","scale","parseFloat","rect","getBoundingClientRect","clientX","left","clientY","top","onMouseUp","ref","initCanvas","getContext","getImageData","fillStyle","fillRect","buf","ArrayBuffer","Uint8ClampedArray","Uint32Array","img","Image","src","toDataURL","handleError","error","errorInfo","Raven","captureException","extra","Speakers","_ref","onBufferUnderrun","writeSample","right","size","bufferSize","enq","onaudioprocess","outputBuffer","getChannelData","samples","deqN","j","RingBuffer","AudioContext","audioCtx","scriptNode","createScriptProcessor","connect","destination","disconnect","close","catch","RunPage","load","match","params","rom","romName","path","currentRequest","callback","handleProgress","req","XMLHttpRequest","open","overrideMimeType","onload","status","responseText","Error","statusText","onerror","onprogress","send","loadBinary","err","alert","toString","handleLoaded","location","reader","FileReader","readAsBinaryString","target","result","lengthComputable","loadedPercent","loaded","total","uiEnabled","loading","nes","loadROM","start","frameTimer","speakers","fpsInterval","getFPS","stop","handlePauseResume","paused","layout","navbarHeight","getComputedStyle","navbar","screenContainer","innerHeight","screen","toggleControlsModal","controlsModal","el","disabled","value","position","src_Screen_0","frame","zapperMove","zapperFireDown","zapperFireUp","src_ControlsModal","keyboardController","_this3","actualSize","desiredSize","NES","onFrame","onStatusUpdate","onAudioSample","wrap","buttonDown","buttonUp","abort","App","recordPageview","GoogleAnalytics","pageview","initialize","BrowserRouter","basename","Route","exact","component","render","install","ReactDOM","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.92987902.chunk.js","sourcesContent":["const config = {\n  ROMS: {\n    \"Mario ♥\":\n      \"/roms/mario/mario.nes\",\n    \"Bubble Bobble\":\n      \"https://cors-anywhere.herokuapp.com/http://theromdepot.com/roms/NES/US/Bubble%20Bobble%20(U).nes\",\n    Castlevania:\n      \"https://cors-anywhere.herokuapp.com/http://theromdepot.com/roms/NES/US/Castlevania%20(U).nes\",\n    Contra:\n      \"https://cors-anywhere.herokuapp.com/http://theromdepot.com/roms/NES/US/Contra%20(U).nes\",\n    \"Donkey Kong Classics\":\n      \"https://cors-anywhere.herokuapp.com/http://theromdepot.com/roms/NES/US/Donkey%20Kong%20Classics%20(U).nes\",\n    \"Duck Hunt\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Duck%20Hunt%20(JUE).nes\",\n    \"Final Fantasy\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Final%20Fantasy%20(U).nes\",\n    Golf:\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Golf%20(JU).nes\",\n    \"Kirby's Adventure\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Kirby's%20Adventure%20(U).nes\",\n    \"The Legend of Zelda\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Legend%20of%20Zelda,%20The%20(Rev%201)%20(U).nes\",\n    Lemmings:\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Lemmings%20(U).nes\",\n    Lifeforce:\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Lifeforce%20(U).nes\",\n    \"Mario Bros.\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Mario%20Bros%20(JU).nes\",\n    \"Mega Man\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Mega%20Man%20(U).nes\",\n    \"Metal Gear\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Metal%20Gear%20(U).nes\",\n    Metroid:\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Metroid%20(U).nes\",\n    \"Pac-Man\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Pac-Man%20(U).nes\",\n    \"Super Mario Bros.\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Super%20Mario%20Bros%20(Rev%201)%20(JU).nes\",\n    \"Super Mario Bros. 2\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Super%20Mario%20Bros%202%20(Rev%201)%20(U).nes\",\n    \"Super Mario Bros. 3\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Super%20Mario%20Bros%203%20(Rev%201)%20(U).nes\",\n    \"Tecmo Super Bowl\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Tecmo%20Super%20Bowl%20(U).nes\",\n    \"Teenage Mutant Ninja Turtles II\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Teenage%20Mutant%20Ninja%20Turtles%202%20(U).nes\",\n    Tennis:\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Tennis%20(JU).nes\",\n    Tetris:\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Tetris%20(U).nes\",\n    \"Tetris 2\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Tetris%202%20(U).nes\",\n    \"Zelda 2\":\n      \"https://cors-anywhere.herokuapp.com/http://www.vertigofx.com/public/games/roms/nes/Zelda%202%20-%20The%20Adventure%20of%20Link%20(U).nes\",\n  },\n  GOOGLE_ANALYTICS_CODE: process.env.REACT_APP_GOOGLE_ANALYTICS_CODE,\n  SENTRY_URI: process.env.REACT_APP_SENTRY_URI\n};\n\nexport default config;\n","import React, { Component } from \"react\";\nimport \"./ListPage.css\";\nimport { ListGroup } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport config from \"./config\";\n\nclass ListPage extends Component {\n  render() {\n    return (\n      <div\n        className=\"container ListPage my-4\"\n        onDragOver={this.handleDragOver}\n        onDrop={this.handleDrop}\n      >\n        <div className=\"row justify-content-center\">\n          <div className=\"col-md-8\">\n            <header className=\"mb-4\">\n              <h1 className=\"mb-3\">JSNES</h1>\n              <p>A JavaScript NES emulator.</p>\n              <p>\n                By <a href=\"https://twitter.com/bfirsh\">Ben Firshman</a>. Source\n                on <a href=\"https://github.com/bfirsh/jsnes\">GitHub</a>.\n              </p>\n            </header>\n            <ListGroup className=\"mb-4\">\n              {Object.keys(config.ROMS).map(key => (\n                <Link\n                  key={key}\n                  to={\"/run/\" + encodeURIComponent(key)}\n                  className=\"list-group-item\"\n                >\n                  {key}\n                  <span className=\"float-right\">&rsaquo;</span>\n                </Link>\n              ))}\n            </ListGroup>\n            <p>Or, drag and drop a ROM file onto the page.</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  handleDragOver = e => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"copy\";\n  };\n\n  handleDrop = e => {\n    e.preventDefault();\n\n    const file = e.dataTransfer.items\n      ? e.dataTransfer.items[0].getAsFile()\n      : e.dataTransfer.files[0];\n\n    this.props.history.push({ pathname: \"/run\", state: { file } });\n  };\n}\n\nexport default ListPage;\n","import React, { Component } from \"react\";\n\nclass ControlMapperRow extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playerOneButton: \"\",\n      playerTwoButton: \"\",\n      waitingForKey: 0\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    var keys = this.props.keys;\n    var button = this.props.button;\n    var playerButtons = [];\n    for (var key in keys) {\n      if (keys[key][0] === 1 && keys[key][1] === button) {\n        playerButtons[0] = keys[key][2];\n        console.log(playerButtons[0]);\n      } else if (keys[key][0] === 2 && keys[key][1] === button) {\n        playerButtons[1] = keys[key][2];\n      }\n    }\n    this.setState({\n      playerOneButton: playerButtons[0],\n      playerTwoButton: playerButtons[1]\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // Prevent setState being called repeatedly\n    if (prevState.waitingForKey !== 0) {\n      var keys = this.props.keys;\n      var button = this.props.button;\n      var playerButtons = [];\n      for (var key in keys) {\n        if (keys[key][0] === 1 && keys[key][1] === button) {\n          playerButtons[0] = keys[key][2];\n          console.log(playerButtons[0]);\n        } else if (keys[key][0] === 2 && keys[key][1] === button) {\n          playerButtons[1] = keys[key][2];\n        }\n      }\n      this.setState({\n        playerOneButton: playerButtons[0],\n        playerTwoButton: playerButtons[1],\n        waitingForKey: 0\n      });\n    }\n  }\n\n  handleClick(player) {\n    this.props.handleClick([player, this.props.button]);\n    this.setState({\n      waitingForKey: player\n    });\n  }\n\n  render() {\n    const waitingText = \"Press key...\";\n    return (\n      <tr>\n        <td>{this.props.buttonName}</td>\n        <td onClick={() => this.handleClick(1)}>\n          {this.state.waitingForKey === 1\n            ? waitingText\n            : this.state.playerOneButton}\n        </td>\n        <td onClick={() => this.handleClick(2)}>\n          {this.state.waitingForKey === 2\n            ? waitingText\n            : this.state.playerTwoButton}\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default ControlMapperRow;\n","import React, { Component } from \"react\";\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Table\n} from \"reactstrap\";\nimport { Controller } from \"jsnes\";\nimport ControlMapperRow from \"./ControlMapperRow\";\n\nclass ControlsModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { keys: props.keys, button: undefined, modified: false };\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.listenForKey = this.listenForKey.bind(this);\n  }\n\n  componentWillUnmount() {\n    if (this.state.modified) {\n      this.props.setKeys(this.state.keys);\n    }\n    this.removeKeyListener(\"keydown\", this.handleKeyDown);\n  }\n\n  listenForKey(button) {\n    this.setState({ button });\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown(event) {\n    var button = this.state.button;\n    var keys = this.state.keys;\n    var newKeys = {};\n    for (var key in keys) {\n      if (keys[key][0] !== button[0] || keys[key][1] !== button[1]) {\n        newKeys[key] = keys[key];\n      }\n    }\n    this.setState({\n      keys: {\n        ...newKeys,\n        [event.keyCode]: [\n          ...button.slice(0, 2),\n          event.key.length > 1 ? event.key : String(event.key).toUpperCase()\n        ]\n      },\n      button: undefined,\n      modified: true\n    });\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  removeKeyListener() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  render() {\n    return (\n      <Modal\n        isOpen={this.props.isOpen}\n        toggle={this.props.toggle}\n        className=\"ControlsModal\"\n      >\n        <ModalHeader toggle={this.props.toggle}>Controls</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th>Button</th>\n                <th>Player 1</th>\n                <th>Player 2</th>\n              </tr>\n            </thead>\n            <tbody>\n              <ControlMapperRow\n                buttonName=\"Left\"\n                button={Controller.BUTTON_LEFT}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n              <ControlMapperRow\n                buttonName=\"Right\"\n                button={Controller.BUTTON_RIGHT}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n              <ControlMapperRow\n                buttonName=\"Up\"\n                button={Controller.BUTTON_UP}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n              <ControlMapperRow\n                buttonName=\"Down\"\n                button={Controller.BUTTON_DOWN}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n              <ControlMapperRow\n                buttonName=\"A\"\n                button={Controller.BUTTON_A}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n              <ControlMapperRow\n                buttonName=\"B\"\n                button={Controller.BUTTON_B}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n              <ControlMapperRow\n                buttonName=\"Start\"\n                button={Controller.BUTTON_START}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n              <ControlMapperRow\n                buttonName=\"Select\"\n                button={Controller.BUTTON_SELECT}\n                keys={this.state.keys}\n                handleClick={this.listenForKey}\n              />\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button outline color=\"primary\" onClick={this.props.toggle}>\n            Close\n          </Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nexport default ControlsModal;\n","// FrameTimer is two timers: one which triggers at 60 FPS, and the other which\n// triggers whenever there is an animation frame.\n//\n// Normally, the animation frame is 60 FPS, but if it isn't, we need to\n// bodge it by setting up another timer.\n//\n// Why not just use the bodge all the time? If the animation frame is 60 FPS,\n// then it is a much more accurate timer than setInterval. Also, two timers\n// will sometimes be out of sync, causing missed frames.\nexport default class FrameTimer {\n  constructor(props) {\n    // Run at 60 FPS\n    this.onGenerateFrame = props.onGenerateFrame;\n    // Run on animation frame\n    this.onWriteFrame = props.onWriteFrame;\n\n    // Whether to fire events or not\n    this.running = false;\n\n    // Bodge mode and calibration\n    this.bodgeMode = false;\n\n    // Calibration config\n    this.desiredFPS = 60;\n    this.calibrationDelay = 200; // time to wait before starting\n    this.calibrationFrames = 10; // number of frames to calibrate with\n    this.calibrationTolerance = 5; // +/- desired FPS to consider correct\n\n    // Calibration state\n    this.calibrating = false;\n    this.calibrationStartTime = null;\n    this.calibrationCurrentFrames = null;\n\n    // FIXME: disable bodge mode entirely. it's not really working.\n    // if (window.requestAnimationFrame) {\n    //   // wait a sec for it to settle down\n    //   setTimeout(() => {\n    //     this.calibrating = true;\n    //   }, this.calibrationDelay);\n    // } else {\n    //   console.log(\"requestAnimationFrame is not supported\");\n    // }\n  }\n\n  start() {\n    this.running = true;\n    this.requestAnimationFrame();\n    if (this.bodgeMode) this.startBodgeMode();\n  }\n\n  stop() {\n    this.running = false;\n    if (this._requestID) window.cancelAnimationFrame(this._requestID);\n    if (this.bodgeInterval) clearInterval(this.bodgeInterval);\n  }\n\n  requestAnimationFrame() {\n    this._requestID = window.requestAnimationFrame(this.onAnimationFrame);\n  }\n\n  onAnimationFrame = () => {\n    if (this.calibrating) {\n      if (this.calibrationStartTime === null) {\n        this.calibrationStartTime = new Date().getTime();\n        this.calibrationCurrentFrames = 0;\n      } else {\n        this.calibrationCurrentFrames += 1;\n      }\n\n      // Calibration complete!\n      if (this.calibrationCurrentFrames === this.calibrationFrames) {\n        this.calibrating = false;\n\n        var now = new Date().getTime();\n        var delta = now - this.calibrationStartTime;\n        var fps = 1000 / (delta / this.calibrationFrames);\n\n        if (\n          fps <= this.desiredFPS - this.calibrationTolerance ||\n          fps >= this.desiredFPS + this.calibrationTolerance\n        ) {\n          console.log(\n            `Enabling bodge mode. (Desired FPS is ${\n              this.desiredFPS\n            }, actual FPS is ${fps})`\n          );\n          this.startBodgeMode();\n        }\n      }\n    }\n\n    this.requestAnimationFrame();\n\n    if (this.running) {\n      if (!this.bodgeMode) {\n        this.onGenerateFrame();\n      }\n      this.onWriteFrame();\n    }\n  };\n\n  startBodgeMode = () => {\n    this.bodgeMode = true;\n    this.bodgeInterval = setInterval(this.onBodge, 1000 / this.desiredFPS);\n  };\n\n  onBodge = () => {\n    if (this.running) {\n      this.onGenerateFrame();\n    }\n  };\n}\n","import { Controller } from \"jsnes\";\n\n// Mapping keyboard code to [controller, button]\nconst KEYS = {\n  88: [1, Controller.BUTTON_A, \"X\"], // X\n  89: [1, Controller.BUTTON_B, \"Y\"], // Y (Central European keyboard)\n  90: [1, Controller.BUTTON_B, \"Z\"], // Z\n  17: [1, Controller.BUTTON_SELECT, \"Right Ctrl\"], // Right Ctrl\n  13: [1, Controller.BUTTON_START, \"Enter\"], // Enter\n  38: [1, Controller.BUTTON_UP, \"Up\"], // Up\n  40: [1, Controller.BUTTON_DOWN, \"Down\"], // Down\n  37: [1, Controller.BUTTON_LEFT, \"Left\"], // Left\n  39: [1, Controller.BUTTON_RIGHT, \"Right\"], // Right\n  103: [2, Controller.BUTTON_A, \"Num-7\"], // Num-7\n  105: [2, Controller.BUTTON_B, \"Num-9\"], // Num-9\n  99: [2, Controller.BUTTON_SELECT, \"Num-3\"], // Num-3\n  97: [2, Controller.BUTTON_START, \"Num-1\"], // Num-1\n  104: [2, Controller.BUTTON_UP, \"Num-8\"], // Num-8\n  98: [2, Controller.BUTTON_DOWN, \"Num-2\"], // Num-2\n  100: [2, Controller.BUTTON_LEFT, \"Num-4\"], // Num-4\n  102: [2, Controller.BUTTON_RIGHT, \"Num-6\"] // Num-6\n};\n\nexport default class KeyboardController {\n  constructor(options) {\n    this.onButtonDown = options.onButtonDown;\n    this.onButtonUp = options.onButtonUp;\n  }\n\n  loadKeys = () => {\n    var keys;\n    try {\n      keys = localStorage.getItem(\"keys\");\n      if (keys) {\n        keys = JSON.parse(keys);\n      }\n    } catch (e) {\n      console.log(\"Failed to get keys from localStorage.\", e);\n    }\n\n    this.keys = keys || KEYS;\n  };\n\n  setKeys = newKeys => {\n    try {\n      localStorage.setItem(\"keys\", JSON.stringify(newKeys));\n      this.keys = newKeys;\n    } catch (e) {\n      console.log(\"Failed to set keys in localStorage\");\n    }\n  };\n\n  handleKeyDown = e => {\n    var key = this.keys[e.keyCode];\n    if (key) {\n      this.onButtonDown(key[0], key[1]);\n      e.preventDefault();\n    }\n  };\n\n  handleKeyUp = e => {\n    var key = this.keys[e.keyCode];\n    if (key) {\n      this.onButtonUp(key[0], key[1]);\n      e.preventDefault();\n    }\n  };\n\n  handleKeyPress = e => {\n    e.preventDefault();\n  };\n}\n","import React, { Component } from \"react\";\nimport \"./Screen.css\";\n\nconst SCREEN_WIDTH = 256;\nconst SCREEN_HEIGHT = 240;\n\nclass Screen extends Component {\n  render() {\n    return (\n      <canvas\n        className=\"Screen\"\n        width={SCREEN_WIDTH}\n        height={SCREEN_HEIGHT}\n        onMouseDown={this.handleMouseDown}\n        onMouseUp={this.props.onMouseUp}\n        ref={canvas => {\n          this.canvas = canvas;\n        }}\n      />\n    );\n  }\n\n  componentDidMount() {\n    this.initCanvas();\n  }\n\n  componentDidUpdate() {\n    this.initCanvas();\n  }\n\n  initCanvas() {\n    this.context = this.canvas.getContext(\"2d\");\n    this.imageData = this.context.getImageData(\n      0,\n      0,\n      SCREEN_WIDTH,\n      SCREEN_HEIGHT\n    );\n\n    this.context.fillStyle = \"black\";\n    // set alpha to opaque\n    this.context.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\n\n    // buffer to write on next animation frame\n    this.buf = new ArrayBuffer(this.imageData.data.length);\n    // Get the canvas buffer in 8bit and 32bit\n    this.buf8 = new Uint8ClampedArray(this.buf);\n    this.buf32 = new Uint32Array(this.buf);\n\n    // Set alpha\n    for (var i = 0; i < this.buf32.length; ++i) {\n      this.buf32[i] = 0xff000000;\n    }\n  }\n\n  setBuffer = buffer => {\n    var i = 0;\n    for (var y = 0; y < SCREEN_HEIGHT; ++y) {\n      for (var x = 0; x < SCREEN_WIDTH; ++x) {\n        i = y * 256 + x;\n        // Convert pixel from NES BGR to canvas ABGR\n        this.buf32[i] = 0xff000000 | buffer[i]; // Full alpha\n      }\n    }\n  };\n\n  writeBuffer = () => {\n    this.imageData.data.set(this.buf8);\n    this.context.putImageData(this.imageData, 0, 0);\n  };\n\n  fitInParent = () => {\n    let parent = this.canvas.parentNode;\n    let parentWidth = parent.clientWidth;\n    let parentHeight = parent.clientHeight;\n    let parentRatio = parentWidth / parentHeight;\n    let desiredRatio = SCREEN_WIDTH / SCREEN_HEIGHT;\n    if (desiredRatio < parentRatio) {\n      this.canvas.style.width = `${Math.round(parentHeight * desiredRatio)}px`;\n      this.canvas.style.height = `${parentHeight}px`;\n    } else {\n      this.canvas.style.width = `${parentWidth}px`;\n      this.canvas.style.height = `${Math.round(parentWidth / desiredRatio)}px`;\n    }\n  };\n\n  screenshot() {\n    var img = new Image();\n    img.src = this.canvas.toDataURL(\"image/png\");\n    return img;\n  }\n\n  handleMouseDown = e => {\n    if (!this.props.onMouseDown) return;\n    // Make coordinates unscaled\n    let scale = SCREEN_WIDTH / parseFloat(this.canvas.style.width);\n    let rect = this.canvas.getBoundingClientRect();\n    let x = Math.round((e.clientX - rect.left) * scale);\n    let y = Math.round((e.clientY - rect.top) * scale);\n    this.props.onMouseDown(x, y);\n  };\n}\n\nexport default Screen;\n","import Raven from \"raven-js\";\n\nexport const handleError = (error, errorInfo) => {\n  console.error(error);\n  Raven.captureException(error, { extra: errorInfo });\n};\n","import RingBuffer from \"ringbufferjs\";\nimport { handleError } from \"./utils\";\n\nexport default class Speakers {\n  constructor({ onBufferUnderrun }) {\n    this.onBufferUnderrun = onBufferUnderrun;\n    this.bufferSize = 8192;\n    this.buffer = new RingBuffer(this.bufferSize * 2);\n  }\n\n  start() {\n    // Audio is not supported\n    if (!window.AudioContext) {\n      return;\n    }\n    this.audioCtx = new window.AudioContext();\n    this.scriptNode = this.audioCtx.createScriptProcessor(1024, 0, 2);\n    this.scriptNode.onaudioprocess = this.onaudioprocess;\n    this.scriptNode.connect(this.audioCtx.destination);\n  }\n\n  stop() {\n    if (this.scriptNode) {\n      this.scriptNode.disconnect(this.audioCtx.destination);\n      this.scriptNode.onaudioprocess = null;\n      this.scriptNode = null;\n    }\n    if (this.audioCtx) {\n      this.audioCtx.close().catch(handleError);\n      this.audioCtx = null;\n    }\n  }\n\n  writeSample = (left, right) => {\n    if (this.buffer.size() / 2 >= this.bufferSize) {\n      console.log(`Buffer overrun`);\n    }\n    this.buffer.enq(left);\n    this.buffer.enq(right);\n  };\n\n  onaudioprocess = e => {\n    var left = e.outputBuffer.getChannelData(0);\n    var right = e.outputBuffer.getChannelData(1);\n    var size = left.length;\n\n    // We're going to buffer underrun. Attempt to fill the buffer.\n    if (this.buffer.size() < size * 2 && this.onBufferUnderrun) {\n      this.onBufferUnderrun(this.buffer.size(), size * 2);\n    }\n\n    try {\n      var samples = this.buffer.deqN(size * 2);\n    } catch (e) {\n      // onBufferUnderrun failed to fill the buffer, so handle a real buffer\n      // underrun\n\n      // ignore empty buffers... assume audio has just stopped\n      var bufferSize = this.buffer.size() / 2;\n      if (bufferSize > 0) {\n        console.log(`Buffer underrun (needed ${size}, got ${bufferSize})`);\n      }\n      for (var j = 0; j < size; j++) {\n        left[j] = 0;\n        right[j] = 0;\n      }\n      return;\n    }\n    for (var i = 0; i < size; i++) {\n      left[i] = samples[i * 2];\n      right[i] = samples[i * 2 + 1];\n    }\n  };\n}\n","import Raven from \"raven-js\";\nimport React, { Component } from \"react\";\nimport { Button, Progress } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport \"./RunPage.css\";\nimport config from \"./config\";\nimport ControlsModal from \"./ControlsModal\";\nimport FrameTimer from \"./FrameTimer\";\nimport KeyboardController from \"./KeyboardController\";\nimport Screen from \"./Screen\";\nimport Speakers from \"./Speakers\";\nimport { NES } from \"jsnes\";\n\nfunction loadBinary(path, callback, handleProgress) {\n  var req = new XMLHttpRequest();\n  req.open(\"GET\", path);\n  req.overrideMimeType(\"text/plain; charset=x-user-defined\");\n  req.onload = function() {\n    if (this.status === 200) {\n      callback(null, this.responseText);\n    } else if (this.status === 0) {\n      // Aborted, so ignore error\n    } else {\n      callback(new Error(req.statusText));\n    }\n  };\n  req.onerror = function() {\n    callback(new Error(req.statusText));\n  };\n  req.onprogress = handleProgress;\n  req.send();\n  return req;\n}\n\nclass RunPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      running: false,\n      paused: false,\n      controlsModal: false,\n      loading: true,\n      loadedPercent: 3,\n      error: null\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"RunPage\">\n        <nav\n          className=\"navbar navbar-expand\"\n          ref={el => {\n            this.navbar = el;\n          }}\n        >\n          <ul className=\"navbar-nav mr-auto\">\n            <li className=\"navitem\">\n              <Link to=\"/\" className=\"nav-link\">\n                &lsaquo; Back\n              </Link>\n            </li>\n          </ul>\n          <Button\n            outline\n            color=\"primary\"\n            onClick={this.toggleControlsModal}\n            className=\"mr-3\"\n          >\n            Controls\n          </Button>\n          <Button\n            outline\n            color=\"primary\"\n            onClick={this.handlePauseResume}\n            disabled={!this.state.running}\n          >\n            {this.state.paused ? \"Resume\" : \"Pause\"}\n          </Button>\n        </nav>\n\n        {this.state.error ? (\n          this.state.error\n        ) : (\n          <div\n            className=\"screen-container\"\n            ref={el => {\n              this.screenContainer = el;\n            }}\n          >\n            {this.state.loading ? (\n              <Progress\n                value={this.state.loadedPercent}\n                style={{\n                  position: \"absolute\",\n                  width: \"70%\",\n                  left: \"15%\",\n                  top: \"48%\"\n                }}\n              />\n            ) : null}\n            <Screen\n              ref={screen => {\n                this.screen = screen;\n              }}\n              onGenerateFrame={() => {\n                this.nes.frame();\n              }}\n              onMouseDown={(x, y) => {\n                // console.log(\"mouseDown\")\n                this.nes.zapperMove(x, y);\n                this.nes.zapperFireDown();\n              }}\n              onMouseUp={() => {\n                // console.log(\"mouseUp\")\n                this.nes.zapperFireUp();\n              }}\n            />\n            {this.state.controlsModal && (\n              <ControlsModal\n                isOpen={this.state.controlsModal}\n                toggle={this.toggleControlsModal}\n                keys={this.keyboardController.keys}\n                setKeys={this.keyboardController.setKeys}\n              />\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.speakers = new Speakers({\n      onBufferUnderrun: (actualSize, desiredSize) => {\n        if (!this.state.running || this.state.paused) {\n          return;\n        }\n        // Skip a video frame so audio remains consistent. This happens for\n        // a variety of reasons:\n        // - Frame rate is not quite 60fps, so sometimes buffer empties\n        // - Page is not visible, so requestAnimationFrame doesn't get fired.\n        //   In this case emulator still runs at full speed, but timing is\n        //   done by audio instead of requestAnimationFrame.\n        // - System can't run emulator at full speed. In this case it'll stop\n        //    firing requestAnimationFrame.\n        console.log(\n          \"Buffer underrun, running another frame to try and catch up\"\n        );\n        this.nes.frame();\n        // desiredSize will be 2048, and the NES produces 1468 samples on each\n        // frame so we might need a second frame to be run. Give up after that\n        // though -- the system is not catching up\n        if (this.speakers.buffer.size() < desiredSize) {\n          console.log(\"Still buffer underrun, running a second frame\");\n          this.nes.frame();\n        }\n      }\n    });\n    this.nes = new NES({\n      onFrame: this.screen.setBuffer,\n      onStatusUpdate: console.log,\n      onAudioSample: this.speakers.writeSample\n    });\n\n    // For debugging\n    window.nes = this.nes;\n\n    this.frameTimer = new FrameTimer({\n      onGenerateFrame: Raven.wrap(this.nes.frame),\n      onWriteFrame: Raven.wrap(this.screen.writeBuffer)\n    });\n\n    this.keyboardController = new KeyboardController({\n      onButtonDown: this.nes.buttonDown,\n      onButtonUp: this.nes.buttonUp\n    });\n\n    // Load keys from localStorage (if they exist)\n    this.keyboardController.loadKeys();\n\n    document.addEventListener(\"keydown\", this.keyboardController.handleKeyDown);\n    document.addEventListener(\"keyup\", this.keyboardController.handleKeyUp);\n    document.addEventListener(\n      \"keypress\",\n      this.keyboardController.handleKeyPress\n    );\n\n    window.addEventListener(\"resize\", this.layout);\n    this.layout();\n\n    this.load();\n  }\n\n  componentWillUnmount() {\n    if (this.currentRequest) {\n      this.currentRequest.abort();\n    }\n    this.stop();\n    document.removeEventListener(\n      \"keydown\",\n      this.keyboardController.handleKeyDown\n    );\n    document.removeEventListener(\"keyup\", this.keyboardController.handleKeyUp);\n    document.removeEventListener(\n      \"keypress\",\n      this.keyboardController.handleKeyPress\n    );\n    window.removeEventListener(\"resize\", this.layout);\n\n    window.nes = undefined;\n  }\n\n  load = () => {\n    if (this.props.match.params.rom) {\n      const romName = this.props.match.params.rom;\n      const path = config.ROMS[romName];\n      if (!path) {\n        this.setState({ error: `No such ROM: ${romName}` });\n        return;\n      }\n      this.currentRequest = loadBinary(\n        path,\n        (err, data) => {\n          if (err) {\n            window.alert(`Error loading ROM: ${err.toString()}`);\n          } else {\n            this.handleLoaded(data);\n          }\n        },\n        this.handleProgress\n      );\n    } else if (this.props.location.state && this.props.location.state.file) {\n      let reader = new FileReader();\n      reader.readAsBinaryString(this.props.location.state.file);\n      reader.onload = e => {\n        this.currentRequest = null;\n        this.handleLoaded(e.target.result);\n      };\n    } else {\n      window.alert(\"No ROM provided\");\n    }\n  };\n\n  handleProgress = e => {\n    if (e.lengthComputable) {\n      this.setState({ loadedPercent: (e.loaded / e.total) * 100 });\n    }\n  };\n\n  handleLoaded = data => {\n    this.setState({ uiEnabled: true, running: true, loading: false });\n    this.nes.loadROM(data);\n    this.start();\n  };\n\n  start = () => {\n    this.frameTimer.start();\n    this.speakers.start();\n    this.fpsInterval = setInterval(() => {\n      console.log(`FPS: ${this.nes.getFPS()}`);\n    }, 1000);\n  };\n\n  stop = () => {\n    this.frameTimer.stop();\n    this.speakers.stop();\n    clearInterval(this.fpsInterval);\n  };\n\n  handlePauseResume = () => {\n    if (this.state.paused) {\n      this.setState({ paused: false });\n      this.start();\n    } else {\n      this.setState({ paused: true });\n      this.stop();\n    }\n  };\n\n  layout = () => {\n    let navbarHeight = parseFloat(window.getComputedStyle(this.navbar).height);\n    this.screenContainer.style.height = `${window.innerHeight -\n      navbarHeight}px`;\n    this.screen.fitInParent();\n  };\n\n  toggleControlsModal = () => {\n    this.setState({ controlsModal: !this.state.controlsModal });\n  };\n}\n\nexport default RunPage;\n","import React, { Component } from \"react\";\nimport GoogleAnalytics from \"react-ga\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport ListPage from \"./ListPage\";\nimport RunPage from \"./RunPage\";\nimport config from \"./config\";\nimport { handleError } from \"./utils\";\nimport \"./App.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null };\n    if (config.GOOGLE_ANALYTICS_CODE) {\n      GoogleAnalytics.initialize(config.GOOGLE_ANALYTICS_CODE);\n    }\n  }\n\n  render() {\n    if (this.state.error) {\n      return (\n        <div className=\"container my-4\">\n          <div className=\"row justify-content-center\">\n            <div className=\"col-md-8\">\n              Oops - there has been an error. It has been logged to the console.\n            </div>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <div className=\"App\">\n          <Route exact path=\"/\" component={ListPage} />\n          <Route exact path=\"/run\" component={RunPage} />\n          <Route exact path=\"/run/:rom\" component={RunPage} />\n          <Route path=\"/\" render={this.recordPageview} />\n        </div>\n      </BrowserRouter>\n    );\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({ error });\n    handleError(error, errorInfo);\n  }\n\n  recordPageview = ({ location }) => {\n    GoogleAnalytics.pageview(location.pathname);\n    return null;\n  };\n}\n\nexport default App;\n","import Raven from \"raven-js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport config from \"./config\";\nimport \"./index.scss\";\n\nif (config.SENTRY_URI) {\n  Raven.config(config.SENTRY_URI).install();\n}\n\nRaven.context(function() {\n  ReactDOM.render(<App />, document.getElementById(\"root\"));\n});\n"],"sourceRoot":""}